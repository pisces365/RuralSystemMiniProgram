{"version":3,"sources":["webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-image/s-image.vue?0e8e","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-image/s-image.vue?98bc","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-image/s-image.vue?f64e","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-image/s-image.vue?a1f7","uni-app:///uni_modules/s-ui/components/s-image/s-image.vue"],"names":["renderjs","component","options","__file","components","sIcon","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","loading","Boolean","showIcon","type","default","webp","showMenuByLongpress","data","computed","c_class","$mergeClass","round","c_style","$mergeStyle","width","$addUnit","height","borderRadius","radius","display","block","image_style","fadeShow","showImage","style","opacity","transition","lazyState","watch","updateLoadingStatus","bool","updateErrorStatus","src","immediate","handler","loadSrc","lazyLoad","startLoad","startObserver","mounted","beforeDestroy","stopObserver","methods","isLoading","isError","handleClick","$emit","handleLoad","handleError","_isMounted","_isDestroyed","observe","uni","createIntersectionObserver","relativeToViewport","top","threshold","bottom","res","intersectionRatio","disconnect"],"mappings":"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","file":"uni_modules/s-ui/components/s-image/s-image.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./s-image.vue?vue&type=template&id=ca5584f4&scoped=true&\"\nvar renderjs\nimport script from \"./s-image.vue?vue&type=script&lang=js&\"\nexport * from \"./s-image.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.scss?vue&type=style&index=0&id=ca5584f4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ca5584f4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/s-ui/components/s-image/s-image.vue\"\nexport default component.exports","export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-image.vue?vue&type=template&id=ca5584f4&scoped=true&\"","var components\ntry {\n  components = {\n    sIcon: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/s-ui/components/s-icon/s-icon\" */ \"@/uni_modules/s-ui/components/s-icon/s-icon.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-image.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-image.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"s-image\" :class=\"c_class\" :style=\"c_style\" @click=\"handleClick\">\r\n    <view :id=\"$sUid\" class=\"s-image__wrap\">\r\n      <image\r\n        v-if=\"startLoad\"\r\n        class=\"s-image__img\"\r\n        :src=\"loadSrc\"\r\n        :mode=\"mode\"\r\n        :lazy-load=\"false\"\r\n        :fade-show=\"false\"\r\n        :webp=\"webp\"\r\n        :show-menu-by-longpress=\"showMenuByLongpress\"\r\n        :style=\"image_style\"\r\n        @load=\"handleLoad\"\r\n        @error=\"handleError\"\r\n      />\r\n      <view v-if=\"showLoading && isLoading\" class=\"s-image__loading\">\r\n        <slot name=\"loading\">\r\n          <s-icon\r\n            v-if=\"showIcon && loadingIcon\"\r\n            custom-class=\"s-image__loading-icon\"\r\n            :class-prefix=\"iconPrefix\"\r\n            :name=\"loadingIcon\"\r\n            :size=\"iconSize\"\r\n          />\r\n        </slot>\r\n      </view>\r\n      <view v-else-if=\"showError && isError\" class=\"s-image__error\">\r\n        <slot name=\"error\">\r\n          <s-icon\r\n            v-if=\"showIcon && errorIcon\"\r\n            custom-class=\"s-image__error-icon\"\r\n            :class-prefix=\"iconPrefix\"\r\n            :name=\"errorIcon\"\r\n            :size=\"iconSize\"\r\n          />\r\n        </slot>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport componentMixin from '../../mixins/componentMixin';\r\n\r\n/**\r\n * s-image 图片\r\n * @description 图片组件\r\n * @property {String} src 图片路径\r\n * @property {String} mode = [scaleToFill|aspectFill|widthFix] 图片裁剪、缩放的模式，默认 scaleToFill\r\n * @property {Number|String} width 图片宽度\r\n * @property {Number|String} height 图片高度\r\n * @property {Number|String} radius 图片圆角\r\n * @property {Boolean} round 是否显示为圆形\r\n * @property {Boolean} block 是否为块级元素，消除间隙，默认false\r\n * @property {Boolean} lazyLoad 是否开启懒加载\r\n * @property {Number|String} threshold 触发加载时的位置\r\n * @property {Boolean} fadeShow 图片加载成功后显示时fade效果\r\n * @property {Number|String} fadeDuration fade效果过渡时间，单位ms\r\n * @property {Boolean} showLoading 是否显示加载状态\r\n * @property {Boolean} showError 是否显示加载失败状态\r\n * @property {String} loadingIcon 加载时提示的图标名称或图片链接\r\n * @property {String} errorIcon 失败时提示的图标名称或图片链接\r\n * @property {String} iconPrefix 图标类名前缀，同 Icon 组件的 class-prefix 属性\r\n * @property {Number|String} iconSize 图标大小\r\n * @property {Boolean} webp image webp属性 默认为false\r\n * @property {Boolean} showMenuByLongpress image show-menu-by-longpress属性 默认为false\r\n * @property {Boolean} showIcon 是否显示加载中或加载失败图标\r\n * @event {Function} click 点击事件\r\n * @event {Function} load 加载成功事件\r\n * @event {Function} error 加载失败事件\r\n * @example <s-image src=\"\" width=\"100\" height=\"100\" />\r\n */\r\nexport default {\r\n  name: 'SImage',\r\n  mixins: [componentMixin],\r\n  props: {\r\n    src: {\r\n      default: '',\r\n    },\r\n    mode: {\r\n      type: String,\r\n      default: 'scaleToFill',\r\n    },\r\n    width: [Number, String],\r\n    height: [Number, String],\r\n    radius: [Number, String],\r\n    round: Boolean,\r\n    block: Boolean,\r\n    showLoading: Boolean,\r\n    showError: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    loadingIcon: {\r\n      type: String,\r\n      default: 'photo',\r\n    },\r\n    errorIcon: {\r\n      type: String,\r\n      default: 'photo-fail',\r\n    },\r\n    iconPrefix: String,\r\n    iconSize: [Number, String],\r\n    lazyLoad: Boolean,\r\n    threshold: {\r\n      type: [Number, String],\r\n      default: 100,\r\n    },\r\n    fadeShow: Boolean,\r\n    fadeDuration: {\r\n      type: [Number, String],\r\n      default: 300,\r\n    },\r\n    loading: Boolean,\r\n    error: Boolean,\r\n    showIcon: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    webp: Boolean,\r\n    showMenuByLongpress: Boolean,\r\n  },\r\n  data: () => ({\r\n    loadSrc: '',\r\n    startLoad: false,\r\n    isLoading: true,\r\n    isError: false,\r\n  }),\r\n  computed: {\r\n    c_class() {\r\n      return this.$mergeClass({\r\n        's-image--round': this.round,\r\n      }, this.custom_class);\r\n    },\r\n    c_style() {\r\n      return this.$mergeStyle({\r\n        width: this.$addUnit(this.width),\r\n        height: this.$addUnit(this.height),\r\n        borderRadius: this.$addUnit(this.radius),\r\n        display: this.block ? 'block' : '',\r\n      }, this.custom_style);\r\n    },\r\n    image_style() {\r\n      const style = {};\r\n      if (this.fadeShow) {\r\n        const showImage = !(this.isLoading || this.isError);\r\n        if (showImage) {\r\n          style.opacity = 1;\r\n          style.transition = `opacity ${this.fadeDuration}ms ease-in-out`;\r\n        } else {\r\n          style.opacity = 0;\r\n        }\r\n      }\r\n      return this.$mergeStyle(style);\r\n    },\r\n    lazyState() {\r\n      return [\r\n        this.lazyLoad,\r\n        this.startLoad,\r\n        this.threshold,\r\n      ];\r\n    },\r\n  },\r\n  watch: {\r\n    loading(bool) {\r\n      this.updateLoadingStatus(bool);\r\n    },\r\n    error(bool) {\r\n      this.updateErrorStatus(bool);\r\n    },\r\n    src: {\r\n      immediate: true,\r\n      handler(src) {\r\n        this.loadSrc = this.lazyLoad ? '' : src;\r\n        this.startLoad = !this.lazyLoad;\r\n        if (src) {\r\n          this.updateLoadingStatus(true);\r\n          this.updateErrorStatus(false);\r\n        } else {\r\n          this.updateLoadingStatus(false);\r\n          this.updateErrorStatus(true);\r\n        }\r\n      },\r\n    },\r\n    lazyState() {\r\n      this.startObserver();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.startObserver();\r\n  },\r\n  beforeDestroy() {\r\n    this.stopObserver();\r\n  },\r\n  methods: {\r\n    updateLoadingStatus(bool) {\r\n      this.isLoading = this.loading || bool;\r\n    },\r\n    updateErrorStatus(bool) {\r\n      this.isError = this.error || bool;\r\n    },\r\n    handleClick(e) {\r\n      this.$emit('click', e);\r\n    },\r\n    handleLoad(e) {\r\n      if (this.startLoad) {\r\n        this.updateLoadingStatus(false);\r\n        this.updateErrorStatus(false);\r\n        this.$emit('load', e);\r\n      }\r\n    },\r\n    handleError(e) {\r\n      if (this.startLoad) {\r\n        this.updateLoadingStatus(false);\r\n        this.updateErrorStatus(true);\r\n        this.$emit('error', e);\r\n      }\r\n    },\r\n    startObserver() {\r\n      this.stopObserver();\r\n      if (this._isMounted && !this._isDestroyed && this.lazyLoad && !this.startLoad) {\r\n        const threshold = this.$toPx(this.threshold);\r\n        this.observe = uni.createIntersectionObserver(this);\r\n        this.observe.relativeToViewport({\r\n          top: threshold,\r\n          bottom: threshold,\r\n        }).observe(`#${this.$sUid}`, res => {\r\n          if (res.intersectionRatio > 0) {\r\n            this.loadSrc = this.src;\r\n            this.startLoad = true;\r\n            this.stopObserver();\r\n          }\r\n        });\r\n      }\r\n    },\r\n    stopObserver() {\r\n      if (this.observe) {\r\n        this.observe.disconnect();\r\n        this.observe = null;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped src=\"./index.scss\"></style>\r\n"],"sourceRoot":""}