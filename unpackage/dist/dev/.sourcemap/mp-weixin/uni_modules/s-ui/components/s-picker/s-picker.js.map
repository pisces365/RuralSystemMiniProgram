{"version":3,"sources":["webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-picker/s-picker.vue?b3fa","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-picker/s-picker.vue?d8ff","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-picker/s-picker.vue?af32","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-picker/s-picker.vue?2eeb","uni-app:///uni_modules/s-ui/components/s-picker/s-picker.vue"],"names":["renderjs","component","options","__file","components","sPopup","sButton","sLoading","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","a0","_self","_c","color","isDisabledConfirm","confirmColor","l0","pickerView","__map","columnDataList","column","columnIndex","$orig","__get_orig","$scope","data","scopedSlotsCompiler","$setScopedSlotsParams","scopeParams","item","index","$mp","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","name","mixins","props","visible","Boolean","columns","type","Array","default","value","multiple","valueKey","String","labelKey","placeholder","text","separator","title","titleColor","cancelText","cancelColor","confirmText","disabledColor","indicatorClass","indicatorStyle","maskClass","maskStyle","zIndex","Number","mask","maskOpacity","maskClose","showCancel","animate","animateDuration","safeAreaInsetBottom","indexList","loading","computed","initState","indicator_class","$mergeClass","indicator_style","$mergeStyle","mask_class","mask_Style","confirm_class","watch","init","updateValue","created","columnIndexList","valueList","dataList","methods","forEach","i","getDefValue","$isDef","defaultValue","onOpen","$nextTick","close","$emit","onClosed","hideLoading","onPickerStart","onPickerEnd","onPickerChange","some","prevIndexList","toColumnDataList","showLoading","loadingVisible","setData","JSON","stringify","list","$set","updateColumnIndex","valueIndex","onColumnChange","prevData","getColumnIndex","Math","max","min","length","getText","filter","triggerCancel","onCance","onConfirm","params"],"mappings":"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","file":"uni_modules/s-ui/components/s-picker/s-picker.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./s-picker.vue?vue&type=template&id=61125802&scoped=true&\"\nvar renderjs\nimport script from \"./s-picker.vue?vue&type=script&lang=js&\"\nexport * from \"./s-picker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.scss?vue&type=style&index=0&id=61125802&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61125802\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/s-ui/components/s-picker/s-picker.vue\"\nexport default component.exports","export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-picker.vue?vue&type=template&id=61125802&scoped=true&\"","var components\ntry {\n  components = {\n    sPopup: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/s-ui/components/s-popup/s-popup\" */ \"@/uni_modules/s-ui/components/s-popup/s-popup.vue\"\n      )\n    },\n    sButton: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/s-ui/components/s-button/s-button\" */ \"@/uni_modules/s-ui/components/s-button/s-button.vue\"\n      )\n    },\n    sLoading: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/s-ui/components/s-loading/s-loading\" */ \"@/uni_modules/s-ui/components/s-loading/s-loading.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var a0 = {\n    color: _vm.isDisabledConfirm ? _vm.isDisabledConfirm : _vm.confirmColor\n  }\n  var l0 = _vm.pickerView\n    ? _vm.__map(_vm.columnDataList, function(column, columnIndex) {\n        var $orig = _vm.__get_orig(column)\n\n        if (_vm.$scope.data.scopedSlotsCompiler === \"augmented\") {\n          _vm.$setScopedSlotsParams(\"default\", {\n            scopeParams: _vm.scopeParams,\n            columnIndex: columnIndex,\n            item: _vm.item,\n            index: _vm.index\n          })\n        }\n\n        return {\n          $orig: $orig\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        a0: a0,\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-picker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-picker.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"s-picker\" :class=\"custom_class\" :style=\"custom_style\">\r\n    <s-popup\r\n      position=\"bottom\"\r\n      :value=\"visible\"\r\n      :z-index=\"zIndex\"\r\n      :animate=\"animate\"\r\n      :animate-duration=\"animateDuration\"\r\n      :mask=\"mask\"\r\n      :mask-opacity=\"maskOpacity\"\r\n      :mask-close=\"maskClose\"\r\n      :safe-area-inset-bottom=\"safeAreaInsetBottom\"\r\n      @open=\"onOpen\"\r\n      @mask-close=\"triggerCancel\"\r\n      @close=\"close\"\r\n      @closed=\"onClosed\"\r\n    >\r\n      <view class=\"s-picker__header s-hairline--bottom\">\r\n        <view class=\"s-picker__header-left\">\r\n          <s-button\r\n            v-if=\"showCancel\"\r\n            type=\"text\"\r\n            size=\"custom\"\r\n            square\r\n            custom-class=\"s-picker__action s-picker__cancel-action\"\r\n            :custom-style=\"{ color: cancelColor }\"\r\n            @click=\"onCance\"\r\n          >\r\n            {{ cancelText }}\r\n          </s-button>\r\n        </view>\r\n        <view class=\"s-picker__title\" :style=\"{ color: titleColor }\">{{ title }}</view>\r\n        <view class=\"s-picker__header-right\">\r\n          <s-button\r\n            type=\"text\"\r\n            size=\"custom\"\r\n            square\r\n            :custom-class=\"confirm_class\"\r\n            :custom-style=\"{ color: isDisabledConfirm ? isDisabledConfirm : confirmColor }\"\r\n            @click=\"onConfirm\"\r\n          >\r\n            {{ confirmText }}\r\n          </s-button>\r\n        </view>\r\n      </view>\r\n      <view class=\"s-picker__body\">\r\n        <picker-view\r\n          v-if=\"pickerView\"\r\n          :value=\"indexList\"\r\n          class=\"s-picker__picker-view\"\r\n          :indicator-class=\"indicator_class\"\r\n          :indicator-style=\"indicator_style\"\r\n          :mask-class=\"mask_class\"\r\n          :mask-style=\"mask_Style\"\r\n          @change=\"onPickerChange\"\r\n          @pickstart=\"onPickerStart\"\r\n          @pickend=\"onPickerEnd\"\r\n        >\r\n          <picker-view-column v-for=\"(column, columnIndex) of columnDataList\" :key=\"columnIndex\">\r\n            <view v-for=\"(item, index) of column\" :key=\"index\" class=\"s-picker__option\">\r\n              <slot :scopeParams=\"scopeParams\" :columnIndex=\"columnIndex\" :item=\"item\" :index=\"index\">\r\n                <text class=\"s-picker__option-text\">{{ item[labelKey] }}</text>\r\n              </slot>\r\n            </view>\r\n          </picker-view-column>\r\n        </picker-view>\r\n      </view>\r\n      <view v-if=\"loading\" class=\"s-picker__loading\">\r\n        <s-loading />\r\n      </view>\r\n    </s-popup>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport componentMixin from '../../mixins/componentMixin';\r\nimport toValidListData from '../../utils/toValidListData';\r\n\r\n/**\r\n * s-picker 底部弹出滑动选择组件 picker\r\n * @description 滑动选则，支持多列，级联选择\r\n * @property {Array|Object} columns 选择数据列表 [{label:'中国',value:'1'}]，multiple 为true时，必须是数组格式[[{label:'中国',value:'1'}]]\r\n * @property {String} title 标题\r\n * @property {Boolean} visible 弹框显示隐藏\r\n * @property {Boolean} multiple 是否是多列选择\r\n * @property {*} value 选中的value，多列选择时为数组\r\n * @property {String} text 双向绑定用来同步确认后的选中label描述\r\n * @property {String} valuelKey 取数据中的那个字段作为value关联\r\n * @property {String} labelKey 取数据中的那个字段作为显示文字\r\n * @property {String|Array} placeholder 给列数据的前面插入一项value为''的占位选择项数据\r\n * @property {String} separator text在多列选择结果字符串的分割符号，默认 -\r\n * @property {String} cancelText 取消按钮文字\r\n * @property {String} confirmText 确认按钮文字\r\n * @property {String} titleColor 标题颜色\r\n * @property {String} cancelColor 取消按钮颜色\r\n * @property {String} confirmColor 确认按钮颜色\r\n * @property {String} disabledColor 确认按钮禁用时颜色\r\n * @property {String|Object} indicatorClass 设置选择器中间选中框的类名\r\n * @property {String|Object} indicatorStyle 设置选择器中间选中框的样式\r\n * @property {String|Object} maskClass 设置蒙层的类名\r\n * @property {String|Object} maskStyle 设置蒙层的样式\r\n * @property {String|Number} zIndex 同popup组件zIndex属性\r\n * @property {String|Boolean|Object} animate 同popup组件animate属性\r\n * @property {Number|String|Object} animateDuration 同popup组件animateDuration属性\r\n * @property {Boolean} mask 同popup组件mask属性\r\n * @property {Boolean} maskClose 点击遮罩是否关闭\r\n * @property {Number|String} maskOpacity 同popup组件maskOpacity属性\r\n * @property {Boolean} showCancel 是否显示取消按钮\r\n * @property {Boolean} safeAreaInsetBottom 同popup组件safeAreaInsetBottom属性，默认true\r\n * @event {Function} change ({\r\n    i: 当前列下标,\r\n    index: 当前列选中的下标,\r\n    value: 当前列选中的value,\r\n    data: 当前列选中的数据对象,\r\n    indexList: 选中的下标数组,\r\n    valueList: 选中的value数组,\r\n    dataList: 选中的数据对象数组,\r\n    text: 选中的label拼接字符串,\r\n    showLoading: 拉取数据时可以开启loading,\r\n    hideLoading: 拉取数据后可以关闭loading,\r\n    setData: 级联选择时在change事件中设置列的数据,\r\n  }) 滑动改变时触发\r\n * @event {Function} cancel 点击取消按钮或遮罩关闭取消时触发\r\n * @event {Function} confirm ({\r\n    indexList: 选中的index数组,\r\n    valueList: 选中的value数组,\r\n    dataList: 选中的data数组,\r\n    value: 选中的value，只有在单列时会有\r\n    data: 选中的data，只有在单列时会有\r\n    text: 选中的label拼接字符串,\r\n    getText: 根据自定义间隔符返回选中的label拼接字符串,\r\n  }) 点击确认时触发\r\n * @example <s-picker v-model=\"value\" :columns=\"columns\" :visible.sync=\"visible\" @confirm=\"onConfirm\" />\r\n */\r\nexport default {\r\n  name: 'SPicker',\r\n  mixins: [componentMixin],\r\n  props: {\r\n    visible: Boolean,\r\n    columns: {\r\n      type: [Array, Object],\r\n      default: () => [],\r\n    },\r\n    value: {\r\n      default: '',\r\n    },\r\n    multiple: Boolean,\r\n    valueKey: {\r\n      type: String,\r\n      default: 'value',\r\n    },\r\n    labelKey: {\r\n      type: String,\r\n      default: 'label',\r\n    },\r\n    placeholder: {\r\n      type: [Array, String],\r\n      default: () => [],\r\n    },\r\n    text: String,\r\n    separator: {\r\n      type: String,\r\n      default: '-',\r\n    },\r\n    title: String,\r\n    titleColor: String,\r\n    cancelText: {\r\n      type: String,\r\n      default: '取消',\r\n    },\r\n    cancelColor: String,\r\n    confirmText: {\r\n      type: String,\r\n      default: '确定',\r\n    },\r\n    confirmColor: String,\r\n    disabledColor: String,\r\n    indicatorClass: [String, Object],\r\n    indicatorStyle: [String, Object],\r\n    maskClass: [String, Object],\r\n    maskStyle: [String, Object],\r\n    zIndex: [Number, String],\r\n    mask: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    maskOpacity: [Number, String],\r\n    maskClose: Boolean,\r\n    showCancel: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    animate: {\r\n      type: [String, Boolean, Object],\r\n      default: 'auto',\r\n    },\r\n    animateDuration: {\r\n      type: [Number, String, Object],\r\n      default: 300,\r\n    },\r\n    safeAreaInsetBottom: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      columnDataList: [], // column 合法数据数组\r\n      indexList: [], // column 每列选中的索引\r\n      pickerView: false, // 初始化picker-view\r\n      isDisabledConfirm: false, // 滑动时禁用确认按钮\r\n      loading: false,\r\n    };\r\n  },\r\n  computed: {\r\n    initState() {\r\n      return [this.columns, this.multiple];\r\n    },\r\n    indicator_class() {\r\n      return this.$mergeClass('s-picker__indicator', this.indicatorClass);\r\n    },\r\n    indicator_style() {\r\n      return this.$mergeStyle(this.indicatorStyle);\r\n    },\r\n    mask_class() {\r\n      return this.$mergeClass('s-picker__mask', this.maskClass);\r\n    },\r\n    mask_Style() {\r\n      return this.$mergeStyle(this.maskStyle);\r\n    },\r\n    confirm_class() {\r\n      return this.$mergeClass('s-picker__action s-picker__confirm-action', {\r\n        's-picker__confirm-action--disabled': this.isDisabledConfirm,\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    initState() {\r\n      this.init();\r\n    },\r\n    value(value) {\r\n      this.updateValue(value);\r\n    },\r\n  },\r\n  created() {\r\n    this.columnIndexList = [];\r\n    this.valueList = [];\r\n    this.dataList = [];\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      const columnIndexList = [];\r\n      const columnDataList = [];\r\n      const valueList = [];\r\n      const indexList = [];\r\n      const dataList = [];\r\n      const columns = this.multiple ? this.columns : [this.columns];\r\n      const values = this.$getType(this.value) === 'array' ? this.value : [this.value];\r\n      columns.forEach((data, i) => {\r\n        columnIndexList[i] = i;\r\n        columnDataList[i] = this.toColumnDataList(i, data);\r\n        indexList[i] = 0;\r\n        valueList[i] = this.getDefValue(values[i]);\r\n        dataList[i] = null;\r\n      });\r\n      this.columnIndexList = columnIndexList;\r\n      this.columnDataList = columnDataList;\r\n      this.valueList = valueList;\r\n      this.indexList = indexList;\r\n      this.dataList = dataList;\r\n      this.updateValue(this.value);\r\n    },\r\n    getDefValue(value, defaultValue = '') {\r\n      return this.$isDef(value) ? value : defaultValue;\r\n    },\r\n    onOpen() {\r\n      this.$nextTick(() => {\r\n        this.updateValue(this.value);\r\n        this.pickerView = true;\r\n        this.isDisabledConfirm = false;\r\n      });\r\n    },\r\n    close() {\r\n      this.$emit('update:visible', false);\r\n    },\r\n    onClosed() {\r\n      this.hideLoading();\r\n      this.pickerView = false;\r\n    },\r\n    onPickerStart() {\r\n      this.isDisabledConfirm = true;\r\n    },\r\n    onPickerEnd() {\r\n      this.isDisabledConfirm = false;\r\n    },\r\n    onPickerChange(e) {\r\n      const prevIndexList = this.indexList;\r\n      this.indexList = [...e.detail.value];\r\n      this.indexList.some((index, i) => {\r\n        if (index !== prevIndexList[i]) {\r\n          this.onColumnChange(i);\r\n          return true;\r\n        }\r\n      });\r\n    },\r\n    toColumnDataList(i, data) {\r\n      const valueKey = this.valueKey;\r\n      const labelKey = this.labelKey;\r\n      const placeholderList = this.$getType(this.placeholder) === 'array' ? this.placeholder : [this.placeholder];\r\n      const placeholder = placeholderList[i];\r\n      return [\r\n        ...(placeholder ? [{ [valueKey]: '', [labelKey]: placeholder }] : []),\r\n        ...toValidListData(data, valueKey, labelKey),\r\n      ];\r\n    },\r\n    showLoading() {\r\n      this.loading = true;\r\n      this.loadingVisible = true;\r\n    },\r\n    hideLoading() {\r\n      this.loadingVisible = false;\r\n      this.$nextTick(() => {\r\n        this.$nextTick(() => {\r\n          if (!this.loadingVisible) {\r\n            this.loading = false;\r\n          }\r\n        });\r\n      });\r\n    },\r\n    setData(i, data) {\r\n      const list = this.toColumnDataList(i, data);\r\n      if (JSON.stringify(this.columnDataList[i]) !== JSON.stringify(list)) {\r\n        this.$set(this.columnDataList, i, list);\r\n        this.$nextTick(() => {\r\n          this.updateColumnIndex(i);\r\n        });\r\n      }\r\n    },\r\n    updateColumnIndex(i) {\r\n      const { valueList, valueKey, columnDataList, indexList } = this;\r\n      const value = String(this.getDefValue(valueList[i]));\r\n      const valueIndex = columnDataList[i].findIndex(item => value === String(this.getDefValue(item[valueKey])));\r\n      let index = this.getColumnIndex(i);\r\n      index = valueIndex > -1 ? valueIndex : index;\r\n      this.$set(indexList, i, index);\r\n      this.onColumnChange(i);\r\n    },\r\n    onColumnChange(i) {\r\n      const index = this.getColumnIndex(i);\r\n      const prevData = this.dataList[i] || null;\r\n      const data = this.columnDataList[i][index] || null;\r\n      if (data !== prevData) {\r\n        this.dataList[i] = data;\r\n        this.valueList[i] = data ? data[this.valueKey] : '';\r\n        this.$emit('change', {\r\n          i,\r\n          index,\r\n          value: this.valueList[i],\r\n          data,\r\n          indexList: [...this.indexList],\r\n          valueList: [...this.valueList],\r\n          dataList: [...this.dataList],\r\n          setData: this.setData,\r\n          showLoading: this.showLoading,\r\n          hideLoading: this.hideLoading,\r\n        });\r\n      }\r\n    },\r\n    getColumnIndex(i) {\r\n      return Math.max(0, Math.min(this.indexList[i], this.columnDataList[i].length - 1));\r\n    },\r\n    getText(separator) {\r\n      separator = this.getDefValue(separator, this.separator);\r\n      return this.dataList.filter(item => item && this.$isDef(item[this.labelKey])).map(item => item[this.labelKey]).join(separator);\r\n    },\r\n    updateValue(value) {\r\n      const values = this.$getType(value) === 'array' ? value : [value];\r\n      this.columnIndexList.forEach(i => {\r\n        this.valueList[i] = this.getDefValue(values[i]);\r\n        this.updateColumnIndex(i);\r\n      });\r\n    },\r\n    triggerCancel() {\r\n      this.$emit('cancel');\r\n    },\r\n    onCance() {\r\n      this.close();\r\n      this.triggerCancel();\r\n    },\r\n    onConfirm() {\r\n      if (!this.isDisabledConfirm) {\r\n        const valueList = this.dataList.map(item => item ? item[this.valueKey] : '');\r\n        const text = this.getText();\r\n        const params = {\r\n          text,\r\n          indexList: [...this.indexList],\r\n          valueList: [...valueList],\r\n          dataList: [...this.dataList],\r\n          getText: this.getText,\r\n        };\r\n        if (!this.multiple) {\r\n          params.value = valueList[0];\r\n          params.data = this.dataList[0];\r\n        }\r\n        this.close();\r\n        this.$emit('input', this.multiple ? [...valueList] : valueList[0]);\r\n        this.$emit('update:text', text);\r\n        this.$emit('confirm', params);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped src=\"./index.scss\"></style>\r\n"],"sourceRoot":""}