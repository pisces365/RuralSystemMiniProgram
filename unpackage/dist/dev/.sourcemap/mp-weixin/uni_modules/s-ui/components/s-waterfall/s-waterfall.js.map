{"version":3,"sources":["webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-waterfall/s-waterfall.vue?aa30","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-waterfall/s-waterfall.vue?dc01","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-waterfall/s-waterfall.vue?5ef3","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-waterfall/s-waterfall.vue?8ee7","uni-app:///uni_modules/s-ui/components/s-waterfall/s-waterfall.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","l0","_self","_c","__map","columnList","list","index","$orig","__get_orig","$scope","data","scopedSlotsCompiler","$setScopedSlotsParams","scopeParams","$mp","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","name","mixins","props","column","type","Number","String","default","gutter","loadItem","Function","computed","columnStyleList","map","watch","init","created","resetId","reset","methods","push","promise","Promise","resolve","_isMounted","_isDestroyed","length","$nextTick","forEach"],"mappings":";;;;2DAAA,0TACIA,EADJ,iKASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,0DACZ,aAAAF,E;;;;2GCvBf,omC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,MAAMP,EAAIQ,YAAY,SAASC,EAAMC,GAChD,IAAIC,EAAQX,EAAIY,WAAWH,GAU3B,MAR4C,cAAxCT,EAAIa,OAAOC,KAAKC,qBAClBf,EAAIgB,sBAAsB,UAAW,CACnCC,YAAajB,EAAIiB,YACjBR,KAAME,EACND,MAAOA,IAIJ,CACLC,MAAOA,OAIXX,EAAIkB,IAAIJ,KAAOK,OAAOC,OACpB,GACA,CACEC,MAAO,CACLjB,GAAIA,MAKRkB,GAAmB,EACnBC,EAAkB,GACtBxB,EAAOyB,eAAgB,G;;;;2DChCvB,4tBAAqqB,eAAG,G;;;;6HCSxqB,kD,oyBASA,CACEC,KAAM,aACNC,OAAQ,CAAC,EAAX,SACEC,MAAO,CACLC,OAAQ,CACNC,KAAM,CAACC,OAAQC,QACfC,QAAS,GAEXC,OAAQ,CACNJ,KAAM,CAACC,OAAQC,QACfC,QAAS,IAEXE,SAAUC,UAEZrB,KAAM,WAAR,OACA,gBAEEsB,SAAU,CACRC,gBADJ,WACA,WACM,OAAOpC,KAAKO,WAAW8B,KAAI,SAAjC,2BACA,8CAIEC,MAAO,CACLX,OADJ,WAEM3B,KAAKuC,SAGTC,QA7BF,WA8BIxC,KAAKQ,KAAO,GACZR,KAAKyC,QAAU,EACfzC,KAAK0C,SAEPC,QAAS,CACPJ,KADJ,WAEM,IAAN,eACMvC,KAAK0C,QACL1C,KAAK4C,KAAK/B,IAEZ6B,MANJ,WASM,IAFA,IAAN,KACA,wBACA,YACQnC,EAAWqC,KAAK,IAElB5C,KAAKQ,KAAO,GACZR,KAAKO,WAAaA,EAClBP,KAAK6C,QAAUC,QAAQC,UACvB/C,KAAKyC,WAEPG,KAjBJ,SAiBA,gBACM,GAAK5C,KAAKgD,aAAchD,KAAKiD,cAAiBjD,KAAKO,WAAW2C,OAA9D,CACA,IAAN,eACA,gCACA,gCACMlD,KAAKmD,WAAU,WACTV,IAAY,EAAxB,SACU5B,EAAKuC,SAAQ,SAAvB,GACY,EAAZ,mEACA,cACA,6EACA,kBACA,4CACA,uCACA,wBACA,EACA,OAEA,oBAGA,OAIA,oB","file":"uni_modules/s-ui/components/s-waterfall/s-waterfall.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./s-waterfall.vue?vue&type=template&id=1a97a174&scoped=true&\"\nvar renderjs\nimport script from \"./s-waterfall.vue?vue&type=script&lang=js&\"\nexport * from \"./s-waterfall.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.scss?vue&type=style&index=0&id=1a97a174&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a97a174\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/s-ui/components/s-waterfall/s-waterfall.vue\"\nexport default component.exports","export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-waterfall.vue?vue&type=template&id=1a97a174&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.columnList, function(list, index) {\n    var $orig = _vm.__get_orig(list)\n\n    if (_vm.$scope.data.scopedSlotsCompiler === \"augmented\") {\n      _vm.$setScopedSlotsParams(\"default\", {\n        scopeParams: _vm.scopeParams,\n        list: $orig,\n        index: index\n      })\n    }\n\n    return {\n      $orig: $orig\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-waterfall.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-waterfall.vue?vue&type=script&lang=js&\"","<template>\r\n  <view :id=\"$sUid\" class=\"s-waterfall\" :class=\"custom_class\" :style=\"custom_style\">\r\n    <view v-for=\"(list, index) of columnList\" :key=\"index\" class=\"s-waterfall__column\" :style=\"columnStyleList[index]\">\r\n      <slot :scopeParams=\"scopeParams\" :list=\"list\" :index=\"index\" />\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport componentMixin from '../../mixins/componentMixin';\r\n/**\r\n * s-waterfall 瀑布流\r\n * @description 瀑布流，自动分发各列数据，实现错位排列\r\n * @property {Number|String} column 列数\r\n * @property {Number|String} gutter 间距\r\n * @property {Function} loadItem (item,callback) 自定义加载每个item，使用callback触发加载完毕\r\n * @example <s-waterfall ref=\"waterfall\"></s-waterfall>\r\n */\r\nexport default {\r\n  name: 'SWaterfall',\r\n  mixins: [componentMixin],\r\n  props: {\r\n    column: {\r\n      type: [Number, String],\r\n      default: 2,\r\n    },\r\n    gutter: {\r\n      type: [Number, String],\r\n      default: 20,\r\n    },\r\n    loadItem: Function,\r\n  },\r\n  data: () => ({\r\n    columnList: [],\r\n  }),\r\n  computed: {\r\n    columnStyleList() {\r\n      return this.columnList.map((_, index) => this.$mergeStyle({\r\n        marginLeft: index > 0 ? this.$addUnit(this.gutter) : '',\r\n      }));\r\n    },\r\n  },\r\n  watch: {\r\n    column() {\r\n      this.init();\r\n    },\r\n  },\r\n  created() {\r\n    this.list = [];\r\n    this.resetId = 0;\r\n    this.reset();\r\n  },\r\n  methods: {\r\n    init() {\r\n      const data = [...this.list];\r\n      this.reset();\r\n      this.push(data);\r\n    },\r\n    reset() {\r\n      const columnList = [];\r\n      const column = parseInt(this.column);\r\n      for (let i = 0; i < column; i++) {\r\n        columnList.push([]);\r\n      }\r\n      this.list = [];\r\n      this.columnList = columnList;\r\n      this.promise = Promise.resolve();\r\n      this.resetId++;\r\n    },\r\n    push(data) {\r\n      if (!this._isMounted || this._isDestroyed || !this.columnList.length) return;\r\n      const resetId = this.resetId;\r\n      const loadItem = this.$getPropsFn('loadItem');\r\n      this.list.push(...data);\r\n      this.$nextTick(() => {\r\n        if (resetId === this.resetId) {\r\n          data.forEach(item => {\r\n            this.promise = this.promise.then(() => new Promise(resolve => {\r\n              if (resetId === this.resetId) {\r\n                this.$getRect(`#${this.$sUid} .s-waterfall__column`, true).then(rects => {\r\n                  if (resetId === this.resetId) {\r\n                    const heights = rects.map(item => item.height);\r\n                    const index = heights.indexOf(Math.min(...heights));\r\n                    this.columnList[index].push(item);\r\n                    if (loadItem) {\r\n                      loadItem(item, resolve);\r\n                    } else {\r\n                      this.$nextTick(resolve);\r\n                    }\r\n                  } else {\r\n                    resolve();\r\n                  }\r\n                });\r\n              } else {\r\n                resolve();\r\n              }\r\n            }));\r\n          });\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped src=\"./index.scss\"></style>\r\n"],"sourceRoot":""}