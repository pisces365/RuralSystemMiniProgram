{"version":3,"sources":["webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-popup/s-popup.vue?26b0","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-popup/s-popup.vue?e6e0","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-popup/s-popup.vue?1dc1","webpack:///D:/uni-appWorkSpace/RuralSystemMiniProgram/RuralSystemMiniProgram/uni_modules/s-ui/components/s-popup/s-popup.vue?0a24","uni-app:///uni_modules/s-ui/components/s-popup/s-popup.vue"],"names":["renderjs","component","options","__file","components","sIcon","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","Math","max","center","left","right","top","bottom","name","mixins","props","position","type","String","default","value","Boolean","background","width","Number","height","radius","round","wrapStyle","Object","zIndex","animatePrefix","animate","animateDuration","mask","maskOpacity","maskStyle","maskClose","duration","closeable","closeIcon","closeSize","closeColor","closeStyle","beforeOpen","Function","beforeClose","safeAreaInsetTop","safeAreaInsetBottom","data","animateStatus","isVisible","zIndexValue","computed","c_class","$mergeClass","c_style","$mergeStyle","animationDuration","animateMap","display","wrap_class","animateName","wrap_Style","$addUnit","borderRadius","mask_Style","backgroundColor","$isDef","close_style","autoAnimateMap","$getType","enter","leave","parseInt","watch","updateVisible","created","assign","visibleId","visibleStatus","timer","mounted","beforeDestroy","zIndexMap","delete","$sUid","clearTimer","methods","setTimer","setTimeout","callback","clearTimeout","_isMounted","onMaskClick","close","$emit","onCloseClick"],"mappings":"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","file":"uni_modules/s-ui/components/s-popup/s-popup.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./s-popup.vue?vue&type=template&id=7fd94a28&scoped=true&\"\nvar renderjs\nimport script from \"./s-popup.vue?vue&type=script&lang=js&\"\nexport * from \"./s-popup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.scss?vue&type=style&index=0&id=7fd94a28&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7fd94a28\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/s-ui/components/s-popup/s-popup.vue\"\nexport default component.exports","export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-popup.vue?vue&type=template&id=7fd94a28&scoped=true&\"","var components\ntry {\n  components = {\n    sIcon: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/s-ui/components/s-icon/s-icon\" */ \"@/uni_modules/s-ui/components/s-icon/s-icon.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-popup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./s-popup.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"s-popup\" :class=\"c_class\" :style=\"c_style\">\r\n    <view v-if=\"mask\" class=\"s-popup__mask\" :style=\"mask_Style\" @touchmove.prevent @click=\"onMaskClick\"></view>\r\n    <view class=\"s-popup__wrap\" :class=\"wrap_class\" :style=\"wrap_Style\" @touchmove.prevent>\r\n      <view v-if=\"position === 'top' && safeAreaInsetTop\" style=\"height: var(--safe-area-inset-top)\"></view>\r\n      <slot />\r\n      <view v-if=\"closeable\" class=\"s-popup__close\" :style=\"close_style\" @click=\"onCloseClick\">\r\n        <slot name=\"close\">\r\n          <s-icon :name=\"closeIcon\" :size=\"closeSize\" :color=\"closeColor\" />\r\n        </slot>\r\n      </view>\r\n      <view v-if=\"position === 'bottom' && safeAreaInsetBottom\" style=\"height: var(--safe-area-inset-bottom)\"></view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport componentMixin from '../../mixins/componentMixin';\r\n\r\n// 记录弹框的zIndex\r\nconst zIndexMap = new Map();\r\nconst getMaxZindex = () => {\r\n  return Math.max(200, ...zIndexMap.values());\r\n};\r\n\r\n// position 默认效果\r\nconst autoAnimateMap = {\r\n  center: 'fade',\r\n  left: 'slide-left',\r\n  right: 'slide-right',\r\n  top: 'slide-top',\r\n  bottom: 'slide-bottom',\r\n};\r\n\r\n/**\r\n * s-popup 弹框\r\n * @description 基础弹框组件\r\n * @property {String} position = [center | left | right | top | bottom ] 显示位置\r\n * @property {Boolean} value v-model双向绑定显示关闭\r\n * @property {String} background 背景色\r\n * @property {Number|String} width wrap容器宽度\r\n * @property {Number|String} height wrap容器高度\r\n * @property {Number|String} radius wrap容器圆角\r\n * @property {Boolean} round 是否显示圆角\r\n * @property {String|Object} wrapStyle wrap容器style样式\r\n * @property {Number|String} zIndex z-index,如没指定，则在显示时使用比较自增\r\n * @property {String} animatePrefix 内置动画class前缀，默认为 s-animate\r\n * @property {String|Boolean|Object} animate = [false|auto|fade|fade-top|slide-top|{enter:'fade',leave:'fade-top'}] 过渡效果，默认 auto 为s-ui styles下animate.scss中定义的效果\r\n * @property {Number|String|Object} animateDuration 显示关闭过渡效果时间 ms\r\n * @property {Boolean} mask 是否显示遮罩\r\n * @property {Number|String} maskOpacity 遮罩透明度 0.7\r\n * @property {String|Object} maskStyle 遮罩自定样式\r\n * @property {Boolean} maskClose 点击遮罩是否关闭\r\n * @property {Number|String} duration 自动关闭时间，为 0不会自动关闭\r\n * @property {Boolean} closeable 是否显示关闭图标\r\n * @property {Boolean} closeIcon 关闭图标名称或图片链接\r\n * @property {String} closeColor 关闭图标颜色\r\n * @property {String|Object} closeStyle 关闭图标样式\r\n * @property {Function} beforeOpen 显示时拦截钩子返回Boolean或Promise通过resolve(Boolean)拦截\r\n * @property {Function} beforeClose 关闭时拦截钩子返回Boolean或Promise通过resolve(Boolean)拦截\r\n * @property {Boolean} safeAreaInsetTop 是否留出顶部安全距离（状态栏高度），默认false\r\n * @property {Boolean} safeAreaInsetBottom 是否开启底部安全区域适配，默认false\r\n * @event {Function} open 打开弹出层时触发\r\n * @event {Function} opened 打开弹出层且动画结束后触发\r\n * @event {Function} close 关闭弹出层时触发\r\n * @event {Function} closed 关闭弹出层且动画结束后触发\r\n * @event {Function} mask-close 点击遮罩层关闭时触发\r\n * @event {Function} icon-close 点击关闭图标关闭时触发\r\n * @example <s-popup v-model=\"visible\"></s-popup>\r\n */\r\nexport default {\r\n  name: 'SPopup',\r\n  mixins: [componentMixin],\r\n  props: {\r\n    position: {\r\n      type: String,\r\n      default: 'center',\r\n    },\r\n    value: Boolean,\r\n    background: String,\r\n    width: [Number, String],\r\n    height: [Number, String],\r\n    radius: [Number, String],\r\n    round: Boolean,\r\n    wrapStyle: [String, Object],\r\n    zIndex: [Number, String],\r\n    animatePrefix: {\r\n      type: String,\r\n      default: 's-animate',\r\n    },\r\n    animate: {\r\n      type: [String, Boolean, Object],\r\n      default: 'auto',\r\n    },\r\n    animateDuration: {\r\n      type: [Number, String, Object],\r\n      default: 300,\r\n    },\r\n    mask: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    maskOpacity: [Number, String],\r\n    maskStyle: [String, Object],\r\n    maskClose: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    duration: [Number, String],\r\n    closeable: Boolean,\r\n    closeIcon: {\r\n      type: String,\r\n      default: 'cross',\r\n    },\r\n    closeSize: [Number, String],\r\n    closeColor: String,\r\n    closeStyle: [String, Object],\r\n    beforeOpen: Function,\r\n    beforeClose: Function,\r\n    safeAreaInsetTop: Boolean,\r\n    safeAreaInsetBottom: Boolean,\r\n  },\r\n  data() {\r\n    return {\r\n      animateStatus: '',\r\n      isVisible: false,\r\n      zIndexValue: 1,\r\n    };\r\n  },\r\n  computed: {\r\n    c_class() {\r\n      const { position, round, animateStatus, custom_class } = this;\r\n      return this.$mergeClass({\r\n        [`s-popup--${position}`]: position && position !== 'custom',\r\n        's-popup--round': round,\r\n        's-popup--enter': animateStatus === 'enter',\r\n        's-popup--leave': animateStatus === 'leave',\r\n      }, custom_class);\r\n    },\r\n    c_style() {\r\n      return this.$mergeStyle({\r\n        animationDuration: this.animateStatus ? this.animateMap[this.animateStatus].duration + 'ms' : '',\r\n        display: this.isVisible ? '' : 'none',\r\n        zIndex: this.zIndexValue > 0 ? this.zIndexValue : '',\r\n      }, this.custom_style);\r\n    },\r\n    wrap_class() {\r\n      const animateName = this.animateStatus ? this.animateMap[this.animateStatus].name : '';\r\n      return animateName ? `${this.animatePrefix ? this.animatePrefix + '-' : ''}${animateName}-${this.animateStatus}` : '';\r\n    },\r\n    wrap_Style() {\r\n      return this.$mergeStyle({\r\n        width: this.$addUnit(this.width),\r\n        height: this.$addUnit(this.height),\r\n        background: this.background,\r\n        borderRadius: this.$addUnit(this.radius),\r\n      }, this.wrapStyle);\r\n    },\r\n    mask_Style() {\r\n      return this.$mergeStyle({\r\n        backgroundColor: this.$isDef(this.maskOpacity) ? 'rgba(0, 0, 0, ' + this.maskOpacity + ')' : '',\r\n      }, this.maskStyle);\r\n    },\r\n    close_style() {\r\n      return this.$mergeStyle(this.closeStyle);\r\n    },\r\n    animateMap() {\r\n      let animate = this.animate;\r\n      let duration = this.animateDuration;\r\n\r\n      if (animate === 'auto') {\r\n        animate = autoAnimateMap[this.position];\r\n      }\r\n\r\n      if (this.$getType(animate) !== 'object') {\r\n        animate = { enter: animate, leave: animate };\r\n      }\r\n\r\n      if (this.$getType(duration) !== 'object') {\r\n        duration = { enter: duration, leave: duration };\r\n      }\r\n\r\n      return {\r\n        enter: {\r\n          name: animate.enter,\r\n          duration: parseInt(animate.enter ? duration.enter : 0) || 0,\r\n        },\r\n        leave: {\r\n          name: animate.leave,\r\n          duration: parseInt(animate.leave ? duration.leave : 0) || 0,\r\n        },\r\n      };\r\n    },\r\n  },\r\n  watch: {\r\n    value() {\r\n      this.updateVisible();\r\n    },\r\n  },\r\n  created() {\r\n    Object.assign(this, {\r\n      visibleId: 0,\r\n      visibleStatus: false,\r\n      timer: null,\r\n    });\r\n  },\r\n  mounted() {\r\n    this.updateVisible();\r\n  },\r\n  beforeDestroy() {\r\n    zIndexMap.delete(this.$sUid);\r\n    this.clearTimer();\r\n  },\r\n  methods: {\r\n    setTimer(callback, duration) {\r\n      if (duration > 0) {\r\n        this.timer = setTimeout(callback, duration);\r\n      } else {\r\n        callback();\r\n      }\r\n    },\r\n    clearTimer() {\r\n      if (this.timer) {\r\n        clearTimeout(this.timer);\r\n        this.timer = null;\r\n      }\r\n    },\r\n    updateVisible() {\r\n      if (this._isMounted && this.visibleStatus !== this.value) {\r\n        this[this.value ? 'open' : 'close']();\r\n      }\r\n    },\r\n    async open() {\r\n      if (!this.visibleStatus) {\r\n        const visibleId = ++this.visibleId;\r\n        const beforeOpen = this.$getPropsFn('beforeOpen');\r\n        const flag = beforeOpen ? await beforeOpen() && visibleId === this.visibleId : true;\r\n        if (flag) {\r\n          this.clearTimer();\r\n          let zIndex = this.zIndex;\r\n          if (!(+zIndex > 0)) {\r\n            zIndex = getMaxZindex() + 1;\r\n            zIndexMap.set(this.$sUid, zIndex);\r\n          }\r\n          this.visibleStatus = true;\r\n          this.zIndexValue = zIndex;\r\n          this.isVisible = true;\r\n          this.animateStatus = 'enter';\r\n          this.$emit('input', true);\r\n          this.$emit('open');\r\n          const duration = this.animateMap.enter.duration;\r\n          this.setTimer(() => {\r\n            this.animateStatus = '';\r\n            this.$emit('opened');\r\n            // 自动关闭\r\n            const duration = parseInt(this.duration);\r\n            if (duration > 0) {\r\n              this.timer = setTimeout(() => {\r\n                this.visibleStatus && this.close();\r\n              }, duration);\r\n            }\r\n          }, duration > 0 ? duration + 50 : 0);\r\n        } else {\r\n          this.$emit('input', false);\r\n        }\r\n      }\r\n    },\r\n    async close() {\r\n      if (this.visibleStatus) {\r\n        const visibleId = ++this.visibleId;\r\n        const beforeClose = this.$getPropsFn('beforeClose');\r\n        const flag = beforeClose ? await beforeClose() && visibleId === this.visibleId : true;\r\n        if (flag) {\r\n          this.clearTimer();\r\n          this.visibleStatus = false;\r\n          this.animateStatus = 'leave';\r\n          this.$emit('input', false);\r\n          this.$emit('close');\r\n          const duration = this.animateMap.leave.duration;\r\n          this.setTimer(() => {\r\n            this.isVisible = false;\r\n            this.zIndexValue = 0;\r\n            this.animateStatus = '';\r\n            zIndexMap.delete(this.$sUid);\r\n            this.$emit('closed');\r\n          }, duration);\r\n        } else {\r\n          this.$emit('input', true);\r\n        }\r\n      }\r\n    },\r\n    onMaskClick() {\r\n      if (this.maskClose) {\r\n        this.close();\r\n        this.$emit('mask-close');\r\n      }\r\n    },\r\n    onCloseClick() {\r\n      this.close();\r\n      this.$emit('icon-close');\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped src=\"./index.scss\"></style>\r\n"],"sourceRoot":""}